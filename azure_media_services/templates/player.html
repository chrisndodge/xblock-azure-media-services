<!--
  Copyright (c) Microsoft Corporation. All Rights Reserved.
  Licensed under the MIT license. See LICENSE file on the project webpage for details.
  -->

<div class="xmodule_display xmodule_VideoModule">
<div class="video closed">

    <div class="tc-wrapper">
        <div class="azuremediaplayer">
            <video class="amp-default-skin amp-big-play-centered video-wrapper"
                   data-setup='{ "controls": true, "autoplay": false, "logo": {"enabled": false}, "height": 460 }'>
                <source
                    src="{{ video_url }}"
                    type="application/vnd.ms-sstr+xml"
                    {% if protection_type %}
                    data-setup='{"protectionInfo": [{"type": "{{ protection_type }}", "authenticationToken": "Bearer={{ auth_token }}"}]}'
                    {% endif %}
                />

                {% for caption in captions %}
                <track kind="{{ caption.kind }}" src="{{ caption.src }}" srclang="{{ caption.srclang }}" label="{{ caption.label }}" />
                {% endfor %}

            </video>
        </div>

        {% if transcripts_enabled %}
        {# This element is re-parented dynamically after the AMP is initialized and other buttons are positioned.#}
        <div class="subtitles js-transcripts-container" data-transcript-url="">
            <div class="azure-media-player-toggle-button-style
                        toggleTranscript
                        fa fa-quote-left
                        vjs-menu-button
                        vjs-menu-button-popup
                        vjs-control
                        vjs-button
                        outline-enabled-control
                        amp-subtitles-control"
                 role="menuitem"
                 aria-live="off"
                 tabindex="0"
                 aria-expanded="false"
                 aria-haspopup="true"
                 aria-label="Transcripts Menu"
            >
                <div class="vjs-menu" role="presentation">
                    <ul class="vjs-menu-content" role="menu">
                        <li class="amp-menu-header">Transcripts</li>
                        <li class="vjs-menu-item vjs-selected outline-enabled-control"
                            tabindex="-1"
                            role="menuitemcheckbox"
                            aria-live="off"
                            aria-label="Transcripts Off"
                            aria-checked="true"
                        >
                            Off
                        </li>

                        {% for transcript in captions %}
                        <li class="vjs-menu-item outline-enabled-control"
                            role="menuitemcheckbox"
                            aria-live="off"
                            tabindex="-1"
                            aria-label="{{ transcript.label }}"
                            aria-checked="false"
                            data-srclang="{{ transcript.srclang }}"
                            data-src="{{ transcript.src }}"
                        >
                            {{ transcript.label }}
                            <span class="vjs-control-text"> </span
                        </li>
                      {% endfor %}
                    </ul>
                </div>
                <span class="vjs-control-text">Transcripts</span>
            </div>
        </div>
        {% endif %}
    </div>

    <ul class="wrapper-downloads">
        {% if download_url %}
        <li style="list-style-type: none;" class="video-sources video-download-button">
            <a role="button" href="{{ download_url }}" download>Download video</a>
        </li>
        {% endif %}
    </ul>

</div>
</div>

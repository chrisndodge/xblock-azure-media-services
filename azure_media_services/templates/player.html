<!--
  Copyright (c) Microsoft Corporation. All Rights Reserved.
  Licensed under the MIT license. See LICENSE file on the project webpage for details.
  -->
{% load i18n %}

<div class="xmodule_display xmodule_VideoModule">

  <div class="azuremediaplayer">
    <video class="amp-default-skin amp-big-play-centered video-wrapper"
           data-setup='{ "controls": true, "autoplay": false, "logo": {"enabled": false}, "height": 460 }'>
      <source
        src="{{ video_url }}"
        type="application/vnd.ms-sstr+xml"
        {% if protection_type %}
        data-setup='{"protectionInfo": [{"type": "{{ protection_type }}", "authenticationToken": "Bearer={{ auth_token }}"}]}'
        {% endif %}
      />

      {% for caption in captions %}
        <track kind="{{ caption.kind }}" src="{{ caption.src }}" srclang="{{ caption.srclang }}"
               label="{{ caption.label }}"/>
      {% endfor %}

    </video>
  </div>

  <div class="downloads-container">
    <ul class="wrapper-downloads-custom">
      {% if assets_download %}
        {% if download_url %}
          <li style="list-style-type: none;" class="video-download-button-custom">
            <a role="button" href="{{ download_url }}" download>Download video</a>
          </li>
        {% endif %}

        <li class="video-transcript video-download-button-custom" id="download-transcripts-button">
          <div class="dropdown">
            <a href="#" class="download-transcript dropdown">
              {% trans 'Download transcripts' %}
            </a>
            <div class="dropdown-content dropdown">
              {% for transcript in captions %}
                <a href="{{ transcript.src }}"
                   download="{{ transcript.label|lower }}_{{ transcript.srclang }}.vtt">
                  {{ transcript.label }}
                </a>
              {% endfor %}
            </div>
          </div>
        </li>

      {% endif %}
    </ul>
  </div>

</div>
